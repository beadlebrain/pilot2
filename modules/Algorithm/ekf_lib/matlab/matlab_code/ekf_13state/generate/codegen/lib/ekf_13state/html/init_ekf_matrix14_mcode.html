<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="11,1" id="srcline1">1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T19U3">Be</span>,<span class="var type1" id="S3T15U4">P</span>,<span class="var type1" id="S4T8U5">X</span>,<span class="var type1" id="S5T17U6">Q</span>,<span class="var type1" id="S6T18U7">R</span>]=init_ekf_matrix()</span></span>
<span class="srcline"><span class="lineno"><a href="11,2" id="srcline2">2</a></span><span class="line"><span class="mxinfo" id="T19:U6"><span class="var type1" id="S2T19U12">Be</span>=<span class="mxinfo" id="T19:U8">[<span class="mxinfo" id="T4:U9">0.8906</span>  ;<span class="mxinfo" id="T4:U10">0</span>;<span class="mxinfo" id="T4:U11">0.4547</span>]</span></span>;<span class="comment">%local mageetic unit vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="11,3" id="srcline3">3</a></span><span class="line"><span class="mxinfo" id="T15:U12"><span class="var type1" id="S3T15U22">P</span>=<span class="mxinfo" id="T15:U14">diag(<span class="mxinfo" id="T8:U15">[100;100;100;100;100;100;10;10;10;10;100;100;100]</span>)</span></span>;<span class="comment">%initial position variance (m^2),initial2 velocity variance (m/s)^2,initial quaternion variance,initial gyro bias variance (rad/s)^2</span></span></span>
<span class="srcline"><span class="lineno"><a href="11,4" id="srcline4">4</a></span><span class="line"><span class="mxinfo" id="T8:U16"><span class="var type1" id="S4T8U54">X</span>=<span class="mxinfo" id="T8:U18">zeros(<span class="mxinfo" id="T4:U19">13</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="11,5" id="srcline5">5</a></span><span class="line"><span class="mxinfo" id="T4:U20"><span class="mxinfo" id="T4:U21"><span class="var type1" id="S4T8U62">X</span>(<span class="mxinfo" id="T4:U23">6</span>)</span>=<span class="mxinfo" id="T4:U24">1</span></span>;<span class="comment">%earth gravity</span></span></span>
<span class="srcline"><span class="lineno"><a href="11,6" id="srcline6">6</a></span><span class="line"><span class="mxinfo" id="T17:U25"><span class="var type1" id="S5T17U67">Q</span>=<span class="mxinfo" id="T17:U27">diag(<span class="mxinfo" id="T16:U28">[1e-15;1e-15;1e-15;3e-2;3e-2;5e-1;6e-6;6e-6;6e-6]</span>)</span></span><span class="comment">%gyro noise variance,accelerometer noise variance,gyro bias random walk variance </span></span></span>
<span class="srcline"><span class="lineno"><a href="11,7" id="srcline7">7</a></span><span class="line"><span class="mxinfo" id="T18:U29"><span class="var type1" id="S6T18U91">R</span>=<span class="mxinfo" id="T18:U31">diag(<span class="mxinfo" id="T10:U32">[1e-4;1e-4;3.5e-3;0.8;0.8;5e-3;5e-3;5e-3]</span>)</span></span><span class="comment">%noise:Pgps_x,Pgps_y,Pbaro_z,Vgps_x,Vgps_y,Mx,My,Mz</span></span></span>
</pre>
